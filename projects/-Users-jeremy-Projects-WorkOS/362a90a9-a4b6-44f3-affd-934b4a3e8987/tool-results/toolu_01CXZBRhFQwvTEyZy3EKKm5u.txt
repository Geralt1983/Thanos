     1→// Generic API client for the Work OS backend
     2→const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || ""
     3→const USE_SERVER_ENV = process.env.NEXT_PUBLIC_USE_SERVER === "true"
     4→
     5→export const USE_SERVER = USE_SERVER_ENV && !!API_BASE_URL
     6→
     7→export async function apiRequest<T>(path: string, options: RequestInit = {}): Promise<T> {
     8→  if (!API_BASE_URL) {
     9→    throw new Error("NEXT_PUBLIC_API_BASE_URL is not set")
    10→  }
    11→
    12→  const res = await fetch(`${API_BASE_URL}${path}`, {
    13→    headers: {
    14→      "Content-Type": "application/json",
    15→      ...(options.headers || {}),
    16→    },
    17→    ...options,
    18→  })
    19→
    20→  if (!res.ok) {
    21→    const text = await res.text()
    22→    throw new Error(`API ${res.status} ${res.statusText}: ${text}`)
    23→  }
    24→
    25→  if (res.status === 204) {
    26→    return undefined as T
    27→  }
    28→
    29→  return res.json() as Promise<T>
    30→}
    31→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
